"""Archetype weight tables for all 27 archetypes (9 per genre).

Grid layout per genre:
  Y (complexity)
  ^
  2  [0,2] [1,2] [2,2]  <- Busy/Poly/Chaos
  1  [0,1] [1,1] [2,1]  <- Driving/Groovy/Broken
  0  [0,0] [1,0] [2,0]  <- Minimal/Steady/Displaced
     0     1     2      -> X (syncopation)

These values match src/Engine/ArchetypeData.h in the C++ firmware.
"""

from dataclasses import dataclass, field
from .types import Genre


@dataclass
class ArchetypeDNA:
    """Complete archetype definition."""
    name: str = ""
    grid_x: int = 0
    grid_y: int = 0
    anchor_weights: list[float] = field(default_factory=lambda: [0.0] * 32)
    shimmer_weights: list[float] = field(default_factory=lambda: [0.0] * 32)
    aux_weights: list[float] = field(default_factory=lambda: [0.0] * 32)
    swing_amount: float = 0.0
    swing_pattern: float = 0.0
    default_couple: float = 0.3
    fill_multiplier: float = 1.3
    accent_mask: int = 0x01010101
    ratchet_mask: int = 0x00000000


# =============================================================================
# TECHNO ARCHETYPES
# =============================================================================

TECHNO_MINIMAL = ArchetypeDNA(
    name="Minimal",
    grid_x=0, grid_y=0,
    anchor_weights=[
        1.0, 0.0, 0.0, 0.0,  0.95, 0.0, 0.0, 0.0,
        0.95, 0.0, 0.0, 0.0,  0.90, 0.0, 0.0, 0.0,
        1.0, 0.0, 0.0, 0.0,  0.95, 0.0, 0.0, 0.0,
        0.95, 0.0, 0.0, 0.0,  0.90, 0.0, 0.0, 0.0,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
        1.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
        1.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
    ],
    aux_weights=[
        0.3, 0.0, 0.5, 0.0,  0.3, 0.0, 0.5, 0.0,
        0.3, 0.0, 0.5, 0.0,  0.3, 0.0, 0.5, 0.0,
        0.3, 0.0, 0.5, 0.0,  0.3, 0.0, 0.5, 0.0,
        0.3, 0.0, 0.5, 0.0,  0.3, 0.0, 0.6, 0.0,
    ],
    swing_amount=0.0,
    swing_pattern=0.0,
    default_couple=0.15,
    fill_multiplier=1.15,
    accent_mask=0x01010101,
    ratchet_mask=0x00000000,
)

TECHNO_STEADY = ArchetypeDNA(
    name="Steady",
    grid_x=1, grid_y=0,
    anchor_weights=[
        1.0, 0.0, 0.25, 0.0,  0.9, 0.0, 0.2, 0.0,
        0.95, 0.0, 0.3, 0.0,  0.9, 0.0, 0.2, 0.0,
        1.0, 0.0, 0.25, 0.0,  0.9, 0.0, 0.2, 0.0,
        0.95, 0.0, 0.35, 0.0,  0.9, 0.0, 0.25, 0.0,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.35, 0.0,
        1.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.4, 0.0,
        1.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
    ],
    aux_weights=[
        0.7, 0.0, 0.7, 0.0,  0.7, 0.0, 0.7, 0.0,
        0.7, 0.0, 0.7, 0.0,  0.7, 0.0, 0.7, 0.0,
        0.7, 0.0, 0.7, 0.0,  0.7, 0.0, 0.7, 0.0,
        0.7, 0.0, 0.7, 0.0,  0.7, 0.0, 0.7, 0.0,
    ],
    swing_amount=0.08,
    swing_pattern=0.0,
    default_couple=0.25,
    fill_multiplier=1.25,
    accent_mask=0x01010101,
    ratchet_mask=0x01010101,
)

TECHNO_DISPLACED = ArchetypeDNA(
    name="Displaced",
    grid_x=2, grid_y=0,
    anchor_weights=[
        1.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.5, 0.0,
        0.0, 0.0, 0.0, 0.45,  0.0, 0.0, 0.0, 0.0,
        1.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.55, 0.0,
        0.0, 0.0, 0.4, 0.0,  0.0, 0.5, 0.0, 0.0,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.55,
        0.85, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.5,
        0.9, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
    ],
    aux_weights=[
        0.0, 0.4, 0.0, 0.3,  0.0, 0.4, 0.0, 0.35,
        0.0, 0.4, 0.0, 0.3,  0.0, 0.4, 0.0, 0.35,
        0.0, 0.4, 0.0, 0.3,  0.0, 0.4, 0.0, 0.35,
        0.0, 0.4, 0.0, 0.35,  0.0, 0.45, 0.0, 0.4,
    ],
    swing_amount=0.15,
    swing_pattern=1.0,
    default_couple=0.35,
    fill_multiplier=1.35,
    accent_mask=0x09090909,
    ratchet_mask=0x09090909,
)

TECHNO_DRIVING = ArchetypeDNA(
    name="Driving",
    grid_x=0, grid_y=1,
    anchor_weights=[
        1.0, 0.0, 0.6, 0.0,  0.85, 0.0, 0.6, 0.0,
        0.9, 0.0, 0.6, 0.0,  0.85, 0.0, 0.6, 0.0,
        1.0, 0.0, 0.6, 0.0,  0.85, 0.0, 0.6, 0.0,
        0.9, 0.0, 0.6, 0.0,  0.85, 0.0, 0.65, 0.0,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.0, 0.0,  0.35, 0.0, 0.0, 0.0,
        1.0, 0.0, 0.0, 0.0,  0.35, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.35, 0.0, 0.0, 0.0,
        1.0, 0.0, 0.0, 0.0,  0.4, 0.0, 0.0, 0.0,
    ],
    aux_weights=[
        0.8, 0.0, 0.8, 0.0,  0.8, 0.0, 0.8, 0.0,
        0.8, 0.0, 0.8, 0.0,  0.8, 0.0, 0.8, 0.0,
        0.8, 0.0, 0.8, 0.0,  0.8, 0.0, 0.8, 0.0,
        0.8, 0.0, 0.8, 0.0,  0.8, 0.0, 0.8, 0.0,
    ],
    swing_amount=0.0,
    swing_pattern=0.0,
    default_couple=0.2,
    fill_multiplier=1.3,
    accent_mask=0x01010101,
    ratchet_mask=0x01010101,
)

TECHNO_GROOVY = ArchetypeDNA(
    name="Groovy",
    grid_x=1, grid_y=1,
    anchor_weights=[
        1.0, 0.0, 0.0, 0.55,  0.95, 0.0, 0.0, 0.50,
        0.95, 0.0, 0.0, 0.55,  0.90, 0.0, 0.0, 0.50,
        1.0, 0.0, 0.0, 0.55,  0.95, 0.0, 0.0, 0.50,
        0.95, 0.0, 0.0, 0.60,  0.90, 0.0, 0.0, 0.55,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.0, 0.50,  0.0, 0.0, 0.0, 0.55,
        1.0, 0.0, 0.0, 0.50,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.50,  0.0, 0.0, 0.0, 0.55,
        1.0, 0.0, 0.0, 0.55,  0.0, 0.0, 0.0, 0.0,
    ],
    aux_weights=[
        0.7, 0.0, 0.7, 0.35,  0.7, 0.0, 0.7, 0.35,
        0.7, 0.0, 0.7, 0.35,  0.7, 0.0, 0.7, 0.35,
        0.7, 0.0, 0.7, 0.35,  0.7, 0.0, 0.7, 0.35,
        0.7, 0.0, 0.7, 0.4,  0.7, 0.0, 0.7, 0.4,
    ],
    swing_amount=0.25,
    swing_pattern=1.0,
    default_couple=0.4,
    fill_multiplier=1.45,
    accent_mask=0x11111111,
    ratchet_mask=0x11111111,
)

TECHNO_BROKEN = ArchetypeDNA(
    name="Broken",
    grid_x=2, grid_y=1,
    anchor_weights=[
        0.95, 0.0, 0.0, 0.55,  0.0, 0.0, 0.6, 0.0,
        0.0, 0.0, 0.5, 0.0,  0.0, 0.5, 0.0, 0.0,
        0.9, 0.0, 0.0, 0.55,  0.0, 0.0, 0.55, 0.0,
        0.0, 0.0, 0.45, 0.0,  0.0, 0.55, 0.0, 0.0,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.45, 0.0,  0.0, 0.0, 0.0, 0.5,
        0.85, 0.0, 0.0, 0.0,  0.0, 0.5, 0.0, 0.0,
        0.0, 0.0, 0.45, 0.0,  0.0, 0.0, 0.0, 0.5,
        0.9, 0.0, 0.0, 0.0,  0.0, 0.45, 0.0, 0.0,
    ],
    aux_weights=[
        0.6, 0.35, 0.6, 0.0,  0.6, 0.35, 0.6, 0.35,
        0.6, 0.0, 0.6, 0.35,  0.6, 0.35, 0.6, 0.0,
        0.6, 0.35, 0.6, 0.0,  0.6, 0.35, 0.6, 0.35,
        0.6, 0.0, 0.6, 0.35,  0.6, 0.4, 0.6, 0.0,
    ],
    swing_amount=0.35,
    swing_pattern=2.0,
    default_couple=0.5,
    fill_multiplier=1.6,
    accent_mask=0x55555555,
    ratchet_mask=0x55555555,
)

TECHNO_BUSY = ArchetypeDNA(
    name="Busy",
    grid_x=0, grid_y=2,
    anchor_weights=[
        1.0, 0.4, 0.65, 0.35,  0.85, 0.4, 0.65, 0.35,
        0.9, 0.4, 0.65, 0.35,  0.85, 0.4, 0.65, 0.35,
        1.0, 0.4, 0.65, 0.35,  0.85, 0.4, 0.65, 0.35,
        0.9, 0.4, 0.65, 0.45,  0.85, 0.45, 0.7, 0.45,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.35, 0.0,  0.5, 0.0, 0.35, 0.0,
        1.0, 0.0, 0.35, 0.0,  0.5, 0.0, 0.35, 0.0,
        0.0, 0.0, 0.35, 0.0,  0.5, 0.0, 0.35, 0.0,
        1.0, 0.0, 0.35, 0.0,  0.5, 0.0, 0.4, 0.0,
    ],
    aux_weights=[
        0.75, 0.5, 0.75, 0.5,  0.75, 0.5, 0.75, 0.5,
        0.75, 0.5, 0.75, 0.5,  0.75, 0.5, 0.75, 0.5,
        0.75, 0.5, 0.75, 0.5,  0.75, 0.5, 0.75, 0.5,
        0.75, 0.5, 0.75, 0.55,  0.75, 0.55, 0.75, 0.55,
    ],
    swing_amount=0.05,
    swing_pattern=1.0,
    default_couple=0.35,
    fill_multiplier=1.5,
    accent_mask=0x11111111,
    ratchet_mask=0x11111111,
)

TECHNO_POLYRHYTHM = ArchetypeDNA(
    name="Polyrhythm",
    grid_x=1, grid_y=2,
    anchor_weights=[
        1.0, 0.0, 0.0, 0.75,  0.0, 0.0, 0.7, 0.0,
        0.0, 0.65, 0.0, 0.0,  0.0, 0.7, 0.0, 0.0,
        1.0, 0.0, 0.0, 0.75,  0.0, 0.0, 0.7, 0.0,
        0.0, 0.0, 0.65, 0.0,  0.0, 0.7, 0.0, 0.0,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.55, 0.0,  0.0, 0.55, 0.0, 0.0,
        1.0, 0.0, 0.0, 0.55,  0.0, 0.0, 0.55, 0.0,
        0.0, 0.0, 0.55, 0.0,  0.0, 0.55, 0.0, 0.0,
        1.0, 0.0, 0.0, 0.55,  0.0, 0.0, 0.55, 0.0,
    ],
    aux_weights=[
        0.7, 0.4, 0.7, 0.4,  0.7, 0.4, 0.7, 0.4,
        0.7, 0.4, 0.7, 0.4,  0.7, 0.4, 0.7, 0.4,
        0.7, 0.4, 0.7, 0.4,  0.7, 0.4, 0.7, 0.4,
        0.7, 0.4, 0.7, 0.4,  0.7, 0.45, 0.7, 0.45,
    ],
    swing_amount=0.15,
    swing_pattern=1.0,
    default_couple=0.45,
    fill_multiplier=1.65,
    accent_mask=0x49494949,
    ratchet_mask=0x55555555,
)

TECHNO_CHAOS = ArchetypeDNA(
    name="Chaos",
    grid_x=2, grid_y=2,
    anchor_weights=[
        1.0, 0.0, 0.0, 0.70,  0.0, 0.0, 0.65, 0.0,
        0.0, 0.0, 0.60, 0.0,  0.75, 0.0, 0.0, 0.70,
        0.90, 0.55, 0.0, 0.0,  0.70, 0.0, 0.0, 0.60,
        0.0, 0.65, 0.0, 0.55,  0.0, 0.75, 0.60, 0.0,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.60, 0.0,  0.70, 0.0, 0.0, 0.0,
        0.85, 0.0, 0.0, 0.65,  0.0, 0.60, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.70,  0.0, 0.65, 0.0, 0.60,
        0.90, 0.0, 0.65, 0.0,  0.0, 0.0, 0.0, 0.0,
    ],
    aux_weights=[
        0.6, 0.5, 0.6, 0.5,  0.6, 0.5, 0.6, 0.5,
        0.6, 0.5, 0.6, 0.5,  0.6, 0.5, 0.6, 0.5,
        0.6, 0.5, 0.6, 0.5,  0.6, 0.5, 0.6, 0.5,
        0.6, 0.5, 0.6, 0.55,  0.6, 0.55, 0.6, 0.55,
    ],
    swing_amount=0.45,
    swing_pattern=2.0,
    default_couple=0.55,
    fill_multiplier=1.9,
    accent_mask=0xFFFFFFFF,
    ratchet_mask=0xFFFFFFFF,
)

# =============================================================================
# TRIBAL ARCHETYPES
# =============================================================================

TRIBAL_MINIMAL = ArchetypeDNA(
    name="Minimal",
    grid_x=0, grid_y=0,
    anchor_weights=[
        1.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.95, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.95, 0.0, 0.0, 0.0,
        1.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.95, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.90, 0.0, 0.0, 0.0,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.0, 0.0,  0.90, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.90, 0.0, 0.0, 0.0,
        1.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
    ],
    aux_weights=[
        0.6, 0.0, 0.0, 0.4,  0.6, 0.0, 0.0, 0.4,
        0.0, 0.0, 0.6, 0.0,  0.0, 0.4, 0.6, 0.0,
        0.6, 0.0, 0.0, 0.4,  0.6, 0.0, 0.0, 0.4,
        0.0, 0.0, 0.6, 0.0,  0.0, 0.4, 0.6, 0.0,
    ],
    swing_amount=0.2,
    swing_pattern=1.0,
    default_couple=0.3,
    fill_multiplier=1.3,
    accent_mask=0x01010101,
    ratchet_mask=0x00000000,
)

TRIBAL_STEADY = ArchetypeDNA(
    name="Steady",
    grid_x=1, grid_y=0,
    anchor_weights=[
        1.0, 0.0, 0.0, 0.6,  0.0, 0.0, 0.0, 0.5,
        0.0, 0.0, 0.7, 0.0,  0.0, 0.0, 0.5, 0.0,
        0.95, 0.0, 0.0, 0.6,  0.0, 0.0, 0.0, 0.5,
        0.0, 0.0, 0.7, 0.0,  0.0, 0.0, 0.5, 0.0,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.35, 0.0,  0.0, 0.0, 0.0, 0.0,
        1.0, 0.0, 0.0, 0.0,  0.35, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.35, 0.0,  0.0, 0.0, 0.0, 0.0,
        1.0, 0.0, 0.0, 0.0,  0.35, 0.0, 0.0, 0.0,
    ],
    aux_weights=[
        0.7, 0.0, 0.0, 0.5,  0.7, 0.0, 0.0, 0.5,
        0.0, 0.0, 0.7, 0.0,  0.0, 0.5, 0.7, 0.0,
        0.7, 0.0, 0.0, 0.5,  0.7, 0.0, 0.0, 0.5,
        0.0, 0.0, 0.7, 0.0,  0.0, 0.5, 0.7, 0.0,
    ],
    swing_amount=0.3,
    swing_pattern=1.0,
    default_couple=0.4,
    fill_multiplier=1.4,
    accent_mask=0x11111111,
    ratchet_mask=0x01010101,
)

TRIBAL_DISPLACED = ArchetypeDNA(
    name="Displaced",
    grid_x=2, grid_y=0,
    anchor_weights=[
        1.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.7,
        0.0, 0.0, 0.0, 0.0,  0.8, 0.0, 0.0, 0.0,
        0.9, 0.0, 0.0, 0.0,  0.0, 0.7, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.6,  0.0, 0.0, 0.0, 0.0,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.0, 0.5,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.5, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
        0.9, 0.0, 0.0, 0.0,  0.0, 0.0, 0.5, 0.0,
    ],
    aux_weights=[
        0.0, 0.5, 0.0, 0.4,  0.0, 0.5, 0.0, 0.4,
        0.0, 0.5, 0.0, 0.4,  0.0, 0.5, 0.0, 0.4,
        0.0, 0.5, 0.0, 0.4,  0.0, 0.5, 0.0, 0.4,
        0.0, 0.5, 0.0, 0.4,  0.0, 0.5, 0.0, 0.5,
    ],
    swing_amount=0.4,
    swing_pattern=2.0,
    default_couple=0.5,
    fill_multiplier=1.5,
    accent_mask=0x11111111,
    ratchet_mask=0x11111111,
)

TRIBAL_DRIVING = ArchetypeDNA(
    name="Driving",
    grid_x=0, grid_y=1,
    anchor_weights=[
        1.0, 0.0, 0.0, 0.45,  0.0, 0.0, 0.0, 0.4,
        0.95, 0.0, 0.0, 0.45,  0.0, 0.0, 0.0, 0.4,
        1.0, 0.0, 0.0, 0.45,  0.0, 0.0, 0.0, 0.4,
        0.95, 0.0, 0.0, 0.5,  0.0, 0.0, 0.0, 0.45,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.0, 0.35,  0.0, 0.0, 0.0, 0.35,
        1.0, 0.0, 0.0, 0.35,  0.0, 0.0, 0.0, 0.35,
        0.0, 0.0, 0.0, 0.35,  0.0, 0.0, 0.0, 0.35,
        1.0, 0.0, 0.0, 0.4,  0.0, 0.0, 0.0, 0.35,
    ],
    aux_weights=[
        0.7, 0.0, 0.0, 0.5,  0.7, 0.0, 0.0, 0.5,
        0.7, 0.0, 0.0, 0.5,  0.7, 0.0, 0.0, 0.5,
        0.7, 0.0, 0.0, 0.5,  0.7, 0.0, 0.0, 0.5,
        0.7, 0.0, 0.0, 0.5,  0.7, 0.0, 0.0, 0.5,
    ],
    swing_amount=0.2,
    swing_pattern=1.0,
    default_couple=0.4,
    fill_multiplier=1.4,
    accent_mask=0x11111111,
    ratchet_mask=0x01010101,
)

TRIBAL_GROOVY = ArchetypeDNA(
    name="Groovy",
    grid_x=1, grid_y=1,
    anchor_weights=[
        1.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.95, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.90, 0.0, 0.0, 0.0,
        1.0, 0.0, 0.0, 0.0,  0.90, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.85, 0.0,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.0, 0.55,  0.0, 0.0, 0.0, 0.0,
        1.0, 0.0, 0.0, 0.0,  0.0, 0.55, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.55,  0.0, 0.0, 0.0, 0.0,
        1.0, 0.0, 0.0, 0.0,  0.0, 0.60, 0.0, 0.0,
    ],
    aux_weights=[
        0.7, 0.0, 0.5, 0.0,  0.7, 0.0, 0.0, 0.5,
        0.0, 0.0, 0.7, 0.0,  0.5, 0.0, 0.7, 0.0,
        0.7, 0.0, 0.5, 0.0,  0.7, 0.0, 0.0, 0.5,
        0.0, 0.0, 0.7, 0.0,  0.5, 0.0, 0.7, 0.0,
    ],
    swing_amount=0.4,
    swing_pattern=1.0,
    default_couple=0.5,
    fill_multiplier=1.6,
    accent_mask=0x55555555,
    ratchet_mask=0x11111111,
)

TRIBAL_BROKEN = ArchetypeDNA(
    name="Broken",
    grid_x=2, grid_y=1,
    anchor_weights=[
        0.0, 0.0, 0.0, 0.7,  0.0, 0.0, 0.8, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.7, 0.0, 0.0, 0.0,
        0.9, 0.0, 0.0, 0.0,  0.0, 0.0, 0.7, 0.0,
        0.0, 0.6, 0.0, 0.0,  0.7, 0.0, 0.0, 0.0,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.5, 0.0,  0.0, 0.0, 0.0, 0.5,
        0.8, 0.0, 0.0, 0.0,  0.0, 0.5, 0.0, 0.0,
        0.0, 0.0, 0.5, 0.0,  0.0, 0.0, 0.0, 0.5,
        0.0, 0.0, 0.0, 0.5,  0.0, 0.0, 0.8, 0.0,
    ],
    aux_weights=[
        0.6, 0.0, 0.0, 0.5,  0.0, 0.6, 0.0, 0.0,
        0.5, 0.0, 0.6, 0.0,  0.0, 0.5, 0.0, 0.6,
        0.0, 0.0, 0.5, 0.0,  0.6, 0.0, 0.0, 0.5,
        0.0, 0.6, 0.0, 0.0,  0.5, 0.0, 0.6, 0.0,
    ],
    swing_amount=0.5,
    swing_pattern=2.0,
    default_couple=0.6,
    fill_multiplier=1.7,
    accent_mask=0x55555555,
    ratchet_mask=0x55555555,
)

TRIBAL_BUSY = ArchetypeDNA(
    name="Busy",
    grid_x=0, grid_y=2,
    anchor_weights=[
        1.0, 0.0, 0.0, 0.6,  0.5, 0.0, 0.0, 0.55,
        0.5, 0.0, 0.6, 0.0,  0.5, 0.0, 0.0, 0.55,
        0.95, 0.0, 0.0, 0.6,  0.5, 0.0, 0.0, 0.55,
        0.5, 0.0, 0.6, 0.0,  0.5, 0.0, 0.0, 0.6,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.5, 0.0,  0.0, 0.0, 0.5, 0.0,
        0.0, 0.0, 0.0, 0.5,  0.0, 0.0, 0.5, 0.0,
        0.9, 0.0, 0.5, 0.0,  0.0, 0.0, 0.5, 0.0,
        0.0, 0.0, 0.0, 0.5,  0.0, 0.0, 0.5, 0.0,
    ],
    aux_weights=[
        0.7, 0.45, 0.65, 0.45,  0.7, 0.45, 0.65, 0.45,
        0.7, 0.45, 0.65, 0.45,  0.7, 0.45, 0.65, 0.45,
        0.7, 0.45, 0.65, 0.45,  0.7, 0.45, 0.65, 0.45,
        0.7, 0.45, 0.65, 0.5,  0.7, 0.5, 0.65, 0.5,
    ],
    swing_amount=0.3,
    swing_pattern=1.0,
    default_couple=0.5,
    fill_multiplier=1.6,
    accent_mask=0x55555555,
    ratchet_mask=0x11111111,
)

TRIBAL_POLYRHYTHM = ArchetypeDNA(
    name="Polyrhythm",
    grid_x=1, grid_y=2,
    anchor_weights=[
        1.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.75, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.8, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.75,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.8, 0.0, 0.0,  0.0, 0.0, 0.0, 0.7,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.0, 0.0,  0.7, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.7, 0.0,
        1.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.7, 0.0,  0.0, 0.0, 0.0, 0.0,
    ],
    aux_weights=[
        0.7, 0.0, 0.0, 0.5,  0.7, 0.0, 0.0, 0.5,
        0.0, 0.0, 0.7, 0.0,  0.0, 0.5, 0.7, 0.0,
        0.7, 0.0, 0.0, 0.5,  0.7, 0.0, 0.0, 0.5,
        0.0, 0.0, 0.7, 0.0,  0.0, 0.5, 0.7, 0.0,
    ],
    swing_amount=0.4,
    swing_pattern=2.0,
    default_couple=0.6,
    fill_multiplier=1.8,
    accent_mask=0xAAAAAAAA,
    ratchet_mask=0x55555555,
)

TRIBAL_CHAOS = ArchetypeDNA(
    name="Chaos",
    grid_x=2, grid_y=2,
    anchor_weights=[
        1.0, 0.0, 0.0, 0.0,  0.0, 0.75, 0.0, 0.70,
        0.0, 0.0, 0.75, 0.0,  0.0, 0.0, 0.65, 0.0,
        0.0, 0.70, 0.0, 0.0,  0.90, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.65, 0.0,  0.0, 0.75, 0.0, 0.0,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.60, 0.0,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.65, 0.0, 0.0,  0.90, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.60,  0.0, 0.0, 0.0, 0.65,
        0.85, 0.0, 0.0, 0.0,  0.0, 0.0, 0.60, 0.0,
    ],
    aux_weights=[
        0.6, 0.0, 0.55, 0.0,  0.0, 0.6, 0.0, 0.55,
        0.0, 0.6, 0.0, 0.0,  0.55, 0.0, 0.6, 0.0,
        0.0, 0.55, 0.6, 0.0,  0.0, 0.0, 0.55, 0.6,
        0.0, 0.0, 0.6, 0.55,  0.0, 0.0, 0.0, 0.6,
    ],
    swing_amount=0.6,
    swing_pattern=2.0,
    default_couple=0.7,
    fill_multiplier=2.0,
    accent_mask=0xFFFFFFFF,
    ratchet_mask=0xFFFFFFFF,
)

# =============================================================================
# IDM ARCHETYPES
# =============================================================================

IDM_MINIMAL = ArchetypeDNA(
    name="Minimal",
    grid_x=0, grid_y=0,
    anchor_weights=[
        1.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.90, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.95, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.90, 0.0, 0.0,
        0.95, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
    ],
    aux_weights=[
        0.0, 0.0, 0.0, 0.4,  0.0, 0.0, 0.0, 0.0,
        0.5, 0.0, 0.0, 0.0,  0.0, 0.0, 0.4, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.5,
        0.0, 0.0, 0.4, 0.0,  0.0, 0.0, 0.0, 0.0,
    ],
    swing_amount=0.15,
    swing_pattern=2.0,
    default_couple=0.3,
    fill_multiplier=1.35,
    accent_mask=0x11111111,
    ratchet_mask=0x01010101,
)

IDM_STEADY = ArchetypeDNA(
    name="Steady",
    grid_x=1, grid_y=0,
    anchor_weights=[
        0.95, 0.0, 0.0, 0.0,  0.0, 0.6, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.6, 0.0, 0.0,
        0.9, 0.0, 0.0, 0.0,  0.0, 0.55, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.6, 0.0, 0.0,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.4,
        0.9, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.4,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.4,
        0.9, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
    ],
    aux_weights=[
        0.5, 0.0, 0.4, 0.0,  0.5, 0.0, 0.0, 0.4,
        0.0, 0.0, 0.5, 0.0,  0.4, 0.0, 0.5, 0.0,
        0.5, 0.0, 0.4, 0.0,  0.5, 0.0, 0.0, 0.4,
        0.0, 0.0, 0.5, 0.0,  0.4, 0.0, 0.5, 0.0,
    ],
    swing_amount=0.25,
    swing_pattern=2.0,
    default_couple=0.4,
    fill_multiplier=1.45,
    accent_mask=0x55555555,
    ratchet_mask=0x11111111,
)

IDM_DISPLACED = ArchetypeDNA(
    name="Displaced",
    grid_x=2, grid_y=0,
    anchor_weights=[
        0.5, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.6,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.6, 0.0,  0.0, 0.0, 0.0, 0.7,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.0, 0.0,  0.6, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.6,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.7, 0.0, 0.0,
    ],
    aux_weights=[
        0.0, 0.0, 0.4, 0.0,  0.0, 0.0, 0.0, 0.4,
        0.0, 0.0, 0.0, 0.0,  0.4, 0.0, 0.0, 0.0,
        0.0, 0.4, 0.0, 0.0,  0.0, 0.0, 0.4, 0.0,
        0.0, 0.0, 0.0, 0.4,  0.0, 0.0, 0.0, 0.0,
    ],
    swing_amount=0.4,
    swing_pattern=2.0,
    default_couple=0.5,
    fill_multiplier=1.55,
    accent_mask=0xAAAAAAAA,
    ratchet_mask=0x55555555,
)

IDM_DRIVING = ArchetypeDNA(
    name="Driving",
    grid_x=0, grid_y=1,
    anchor_weights=[
        1.0, 0.0, 0.55, 0.0,  0.8, 0.0, 0.5, 0.0,
        0.0, 0.0, 0.55, 0.0,  0.8, 0.0, 0.5, 0.0,
        0.95, 0.0, 0.55, 0.0,  0.8, 0.0, 0.5, 0.0,
        0.0, 0.0, 0.55, 0.0,  0.8, 0.0, 0.6, 0.45,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.0, 0.0,  0.0, 0.4, 0.0, 0.0,
        0.9, 0.0, 0.0, 0.0,  0.0, 0.4, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.4, 0.0, 0.0,
        0.9, 0.0, 0.0, 0.0,  0.0, 0.45, 0.0, 0.0,
    ],
    aux_weights=[
        0.6, 0.35, 0.55, 0.35,  0.6, 0.35, 0.55, 0.35,
        0.6, 0.35, 0.55, 0.35,  0.6, 0.35, 0.55, 0.35,
        0.6, 0.35, 0.55, 0.35,  0.6, 0.35, 0.55, 0.35,
        0.6, 0.35, 0.55, 0.4,  0.6, 0.4, 0.55, 0.4,
    ],
    swing_amount=0.2,
    swing_pattern=2.0,
    default_couple=0.4,
    fill_multiplier=1.5,
    accent_mask=0x55555555,
    ratchet_mask=0x11111111,
)

IDM_GROOVY = ArchetypeDNA(
    name="Groovy",
    grid_x=1, grid_y=1,
    anchor_weights=[
        1.0, 0.0, 0.0, 0.0,  0.0, 0.60, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.55,  0.0, 0.0, 0.0, 0.0,
        0.95, 0.0, 0.0, 0.0,  0.0, 0.60, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.55,  0.0, 0.0, 0.60, 0.0,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.0, 0.50,  0.0, 0.0, 0.0, 0.0,
        1.0, 0.0, 0.0, 0.0,  0.0, 0.50, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.50,  0.0, 0.0, 0.0, 0.0,
        1.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.0, 0.55,
    ],
    aux_weights=[
        0.55, 0.0, 0.5, 0.0,  0.0, 0.5, 0.0, 0.55,
        0.0, 0.5, 0.0, 0.0,  0.55, 0.0, 0.5, 0.0,
        0.55, 0.0, 0.5, 0.0,  0.0, 0.5, 0.0, 0.55,
        0.0, 0.5, 0.0, 0.0,  0.55, 0.0, 0.55, 0.0,
    ],
    swing_amount=0.35,
    swing_pattern=2.0,
    default_couple=0.5,
    fill_multiplier=1.65,
    accent_mask=0xAAAAAAAA,
    ratchet_mask=0x55555555,
)

IDM_BROKEN = ArchetypeDNA(
    name="Broken",
    grid_x=2, grid_y=1,
    anchor_weights=[
        0.95, 0.0, 0.0, 0.0,  0.0, 0.0, 0.55, 0.0,
        0.0, 0.0, 0.0, 0.5,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.85, 0.0, 0.0, 0.0,
        0.0, 0.5, 0.0, 0.0,  0.0, 0.0, 0.55, 0.0,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.0, 0.5,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.5, 0.0,  0.0, 0.0, 0.0, 0.5,
        0.8, 0.0, 0.0, 0.0,  0.0, 0.0, 0.5, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.5, 0.0, 0.0, 0.0,
    ],
    aux_weights=[
        0.5, 0.0, 0.0, 0.45,  0.0, 0.5, 0.0, 0.0,
        0.0, 0.45, 0.0, 0.0,  0.5, 0.0, 0.0, 0.45,
        0.0, 0.0, 0.5, 0.0,  0.0, 0.45, 0.0, 0.0,
        0.5, 0.0, 0.0, 0.0,  0.0, 0.5, 0.0, 0.45,
    ],
    swing_amount=0.5,
    swing_pattern=2.0,
    default_couple=0.6,
    fill_multiplier=1.8,
    accent_mask=0xAAAAAAAA,
    ratchet_mask=0xAAAAAAAA,
)

IDM_BUSY = ArchetypeDNA(
    name="Busy",
    grid_x=0, grid_y=2,
    anchor_weights=[
        1.0, 0.45, 0.55, 0.0,  0.7, 0.45, 0.55, 0.0,
        0.0, 0.45, 0.55, 0.0,  0.7, 0.45, 0.55, 0.0,
        0.95, 0.45, 0.55, 0.0,  0.7, 0.45, 0.55, 0.0,
        0.0, 0.45, 0.55, 0.5,  0.7, 0.5, 0.6, 0.5,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.0, 0.45,  0.0, 0.0, 0.0, 0.5,
        0.9, 0.0, 0.0, 0.45,  0.0, 0.0, 0.0, 0.5,
        0.0, 0.0, 0.0, 0.45,  0.0, 0.0, 0.0, 0.5,
        0.9, 0.0, 0.0, 0.5,  0.0, 0.0, 0.55, 0.5,
    ],
    aux_weights=[
        0.65, 0.5, 0.6, 0.5,  0.65, 0.5, 0.6, 0.5,
        0.65, 0.5, 0.6, 0.5,  0.65, 0.5, 0.6, 0.5,
        0.65, 0.5, 0.6, 0.5,  0.65, 0.5, 0.6, 0.5,
        0.65, 0.5, 0.6, 0.55,  0.65, 0.55, 0.65, 0.55,
    ],
    swing_amount=0.25,
    swing_pattern=2.0,
    default_couple=0.5,
    fill_multiplier=1.7,
    accent_mask=0xAAAAAAAA,
    ratchet_mask=0x55555555,
)

IDM_POLYRHYTHM = ArchetypeDNA(
    name="Polyrhythm",
    grid_x=1, grid_y=2,
    anchor_weights=[
        1.0, 0.0, 0.0, 0.0,  0.65, 0.0, 0.0, 0.0,
        0.0, 0.6, 0.0, 0.0,  0.0, 0.0, 0.65, 0.0,
        0.0, 0.0, 0.0, 0.6,  0.0, 0.0, 0.0, 0.65,
        0.0, 0.0, 0.6, 0.0,  0.0, 0.0, 0.0, 0.0,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.0, 0.0,  0.0, 0.0, 0.55, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.9, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.55,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.9, 0.0, 0.0,  0.0, 0.0, 0.0, 0.55,
    ],
    aux_weights=[
        0.6, 0.0, 0.0, 0.5,  0.0, 0.6, 0.0, 0.0,
        0.5, 0.0, 0.0, 0.6,  0.0, 0.0, 0.5, 0.0,
        0.6, 0.0, 0.0, 0.5,  0.0, 0.6, 0.0, 0.0,
        0.5, 0.0, 0.0, 0.6,  0.0, 0.0, 0.55, 0.0,
    ],
    swing_amount=0.4,
    swing_pattern=2.0,
    default_couple=0.6,
    fill_multiplier=1.85,
    accent_mask=0xFFFFFFFF,
    ratchet_mask=0xAAAAAAAA,
)

IDM_CHAOS = ArchetypeDNA(
    name="Chaos",
    grid_x=2, grid_y=2,
    anchor_weights=[
        1.0, 0.65, 0.0, 0.0,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.75, 0.65,  0.0, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.90, 0.70, 0.0, 0.0,
        0.75, 0.0, 0.0, 0.0,  0.0, 0.0, 0.65, 0.70,
    ],
    shimmer_weights=[
        0.0, 0.0, 0.0, 0.60,  0.65, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0,  0.0, 0.60, 0.0, 0.70,
        0.85, 0.0, 0.0, 0.0,  0.0, 0.0, 0.60, 0.0,
        0.0, 0.0, 0.70, 0.0,  0.0, 0.0, 0.0, 0.0,
    ],
    aux_weights=[
        0.55, 0.0, 0.0, 0.5,  0.0, 0.55, 0.0, 0.0,
        0.0, 0.5, 0.0, 0.0,  0.55, 0.0, 0.0, 0.5,
        0.0, 0.0, 0.55, 0.0,  0.0, 0.0, 0.5, 0.0,
        0.0, 0.55, 0.0, 0.0,  0.5, 0.0, 0.0, 0.55,
    ],
    swing_amount=0.6,
    swing_pattern=2.0,
    default_couple=0.7,
    fill_multiplier=2.1,
    accent_mask=0xFFFFFFFF,
    ratchet_mask=0xFFFFFFFF,
)

# =============================================================================
# ARCHETYPE LOOKUP
# =============================================================================

_TECHNO_GRID = [
    [TECHNO_MINIMAL, TECHNO_STEADY, TECHNO_DISPLACED],
    [TECHNO_DRIVING, TECHNO_GROOVY, TECHNO_BROKEN],
    [TECHNO_BUSY, TECHNO_POLYRHYTHM, TECHNO_CHAOS],
]

_TRIBAL_GRID = [
    [TRIBAL_MINIMAL, TRIBAL_STEADY, TRIBAL_DISPLACED],
    [TRIBAL_DRIVING, TRIBAL_GROOVY, TRIBAL_BROKEN],
    [TRIBAL_BUSY, TRIBAL_POLYRHYTHM, TRIBAL_CHAOS],
]

_IDM_GRID = [
    [IDM_MINIMAL, IDM_STEADY, IDM_DISPLACED],
    [IDM_DRIVING, IDM_GROOVY, IDM_BROKEN],
    [IDM_BUSY, IDM_POLYRHYTHM, IDM_CHAOS],
]

_GENRE_GRIDS = {
    Genre.TECHNO: _TECHNO_GRID,
    Genre.TRIBAL: _TRIBAL_GRID,
    Genre.IDM: _IDM_GRID,
}


def get_archetype(genre: Genre, grid_x: int, grid_y: int) -> ArchetypeDNA:
    """Get archetype at grid position for genre.

    Args:
        genre: Genre bank (TECHNO, TRIBAL, IDM)
        grid_x: X position (0-2, syncopation axis)
        grid_y: Y position (0-2, complexity axis)

    Returns:
        ArchetypeDNA at the specified position
    """
    grid_x = max(0, min(2, grid_x))
    grid_y = max(0, min(2, grid_y))
    return _GENRE_GRIDS[genre][grid_y][grid_x]


def get_archetype_by_index(genre: Genre, index: int) -> ArchetypeDNA:
    """Get archetype by linear index (0-8).

    Index layout: y * 3 + x
    """
    index = max(0, min(8, index))
    grid_y = index // 3
    grid_x = index % 3
    return get_archetype(genre, grid_x, grid_y)
