---
iteration_id: 2026-01-19-002
goal: "Improve regularity in stable zone"
target_metric: regularity
target_zone: stable
created_at: 2026-01-19T00:00:00.000Z
---

# Improvement Estimates: Iteration 2026-01-19-002

## Goal
**Improve regularity in stable zone**

**Current Problem**:
- Stable zone regularity: 0.558 (target: 0.72-1.00)
- Gap: -22% below target minimum
- Musical impact: Low-ENERGY patterns feel too unpredictable, not "stable"

**Target Metric**: regularity (stable zone)

---

## Lever Analysis

### Sensitivity Data Review
From `metrics/sensitivity-matrix.json`:
- **All levers show LOW impact** on regularity (sensitivity: 0.001-0.008)
- No "primary" or "secondary" levers identified by sensitivity analysis
- Highest sensitivity: `shapeCrossfade2End` (+0.008, R²=0.3) - weak signal

### Bootstrap Heuristics
From `algorithm_config.h` BootstrapLevers (lines 100-111):
- **Primary**: `kEuclideanFadeEnd` (+)
- **Rationale**: "Euclidean persists to higher SHAPE values → more regular, structured patterns"
- **Confidence**: 4/5

**Decision**: Use bootstrap heuristic due to weak sensitivity data. Euclidean patterns are mathematically regular (even spacing), so extending their influence should increase regularity metric.

---

## Levers to Adjust

### Primary Lever: kEuclideanFadeEnd
- **Current value**: 0.70
- **Proposed value**: 0.77 (+10%)
- **Rationale**:
  - Extends euclidean influence further into mid-SHAPE range
  - More patterns at ENERGY=0-0.3 will have euclidean structure
  - Euclidean(n,k) produces evenly-spaced hits → high regularity

**Why this lever?**
1. Stable zone = low ENERGY → low SHAPE values
2. Current: Euclidean fades out at SHAPE=0.70
3. New: Euclidean persists to SHAPE=0.77
4. Result: 10% more of SHAPE range has euclidean structure
5. Euclidean = maximally regular patterns by design

---

## Predicted Impact

### Primary Effects (Target Metric)

**regularity (stable zone)**:
- **Current**: 0.558
- **Predicted**: 0.614 (+10%)
- **Reasoning**:
  - Euclidean patterns have regularity ~0.9-1.0
  - Extending euclidean fade by 10% should blend more high-regularity patterns
  - Conservative estimate: 10% increase in regularity metric
- **Confidence**: MEDIUM (60%)
  - Bootstrap heuristic, not empirical sensitivity data
  - Weak R² values in sensitivity matrix suggest noisy relationship
  - Mechanism is sound (euclidean = regular), but magnitude uncertain

**Success criteria**:
- Target: regularity (stable) >= 0.586 (+5% minimum threshold)
- Stretch: regularity (stable) >= 0.614 (+10%)

---

### Secondary Effects (Other Metrics)

**syncopation (stable zone)**:
- **Predicted**: -5% decrease (0.00 → still ~0.00)
- **Reasoning**: More euclidean = less syncopation (euclidean is anti-syncopated)
- **Risk level**: LOW (already at 0.00, can't drop much)

**regularity (syncopated zone)**:
- **Predicted**: +3% increase (0.491 → 0.506)
- **Reasoning**: Slight spillover effect from extended euclidean influence
- **Risk level**: LOW (still within target range 0.42-0.68)

**regularity (wild zone)**:
- **Predicted**: +2% increase (0.606 → 0.618)
- **Reasoning**: Minimal spillover at high SHAPE (euclidean already faded)
- **Risk level**: MEDIUM (already 26% above target max, would worsen to +28%)

**density (all zones)**:
- **Predicted**: No change (0%)
- **Reasoning**: kEuclideanFadeEnd affects *structure*, not *quantity* of hits
- **Risk level**: LOW

**voiceSeparation (all zones)**:
- **Predicted**: No change (0%)
- **Reasoning**: Voice separation determined by drift/offset, not algorithm blend
- **Risk level**: LOW

---

## Risk Assessment

### Regression Risks

**HIGH RISK**:
- None identified

**MEDIUM RISK**:
- **regularity (wild zone)**: Already 26% above target, may worsen by +2%
  - Mitigation: Wild zone uses high SHAPE values (>0.7), where euclidean is already faded
  - Actual impact likely minimal

**LOW RISK**:
- **syncopation (stable zone)**: May decrease slightly, but already at 0.00
- **regularity (syncopated zone)**: May increase slightly, but within target range

### Unintended Consequences

**Potential issue**: Stable zone becomes TOO regular (mechanical feel)
- Current: 0.558 (too unpredictable)
- Target: 0.72-1.00
- Predicted: 0.614 (still below target max)
- Conclusion: No risk of over-regularization at +10% adjustment

**Potential issue**: Euclidean fade curve becomes non-monotonic
- kEuclideanFadeStart = 0.30
- kEuclideanFadeEnd = 0.70 → 0.77
- Gap: 0.40 → 0.47 (still valid, monotonic curve)
- Conclusion: No mathematical issues

---

## Success Criteria

1. ✅ **Primary goal**: `regularity (stable zone)` increases by >= 5% (0.558 → 0.586)
2. ✅ **No critical regressions**: No metric regresses by > 5%
3. ✅ **Tests pass**: All unit tests and evals complete successfully
4. ⚠️ **Acceptable tradeoff**: `regularity (wild zone)` may increase slightly (acceptable, not target metric)

---

## Learning Objectives

This iteration will teach us:

1. **Bootstrap heuristic validation**: Do our manual lever recommendations (BootstrapLevers) work when sensitivity data is weak?
2. **Euclidean influence on regularity**: Does extending euclidean fade quantitatively increase regularity metric?
3. **Zone isolation**: Can we improve one zone (stable) without breaking others (syncopated, wild)?
4. **Sensitivity data quality**: Are low-impact levers truly ineffective, or is our sensitivity analysis incomplete?

If successful → Bootstrap heuristics are reliable when sensitivity is weak
If failed → Need better sensitivity analysis (Task 63) or different levers

---

## Alternatives Considered

**Alt 1: Adjust kEuclideanFadeStart (+10%)**
- Pro: Also increases euclidean influence
- Con: Affects lower SHAPE range, may over-stabilize already-stable patterns
- Decision: Rejected - kEuclideanFadeEnd targets mid-range better

**Alt 2: Adjust kAnchorKMin (-10%)**
- Pro: Sparser anchor patterns = more predictable
- Con: Bootstrap confidence only 3/5, affects density not regularity
- Decision: Rejected - indirect mechanism, lower confidence

**Alt 3: Multi-lever approach (kEuclideanFadeEnd + kSyncopationWidth)**
- Pro: Dual attack on regularity
- Con: Harder to attribute causality, higher regression risk
- Decision: Rejected - single-lever first for clean signal

---

## Next Steps

1. Apply change: `kEuclideanFadeEnd: 0.70f → 0.77f`
2. Compile verification: `make pattern-viz`
3. Run evaluation suite: `./build/pattern_viz --eval-suite`
4. Compare metrics: stable zone regularity vs baseline
5. Log results with prediction accuracy analysis
