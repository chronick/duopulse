## Improvement Estimates

**Goal**: Fix flavor=0.0 bug causing syncopation=0 across all zones
**Target Metric**: syncopation (all zones)

### Root Cause Analysis

**BUG DISCOVERED**: In `HitBudget.cpp:268`, flavor is hardcoded to 0.0:
```cpp
const float flavor = 0.0f;  // This is the bug!
```

The FLAVOR parameter controls which positions are eligible for syncopation:
- `flavor > 0.3` → enables offbeat positions
- `flavor > 0.6` → enables syncopation mask positions

With `flavor = 0.0`, syncopation positions are NEVER eligible, causing:
- stable zone: syncopation = 0.00 (correct by accident)
- syncopated zone: syncopation = 0.95 (mostly from sweep patterns with different paths)
- wild zone: syncopation = 0.00 (WRONG - should be 0.42-0.75)

### Predicted Changes

**Fix to apply**: Derive flavor from SHAPE parameter:
```cpp
// Derive flavor from shape - high SHAPE should allow syncopation positions
const float flavor = shape;
```

**Rationale**:
- Low SHAPE (stable) → low flavor → strong beats only
- High SHAPE (wild) → high flavor → syncopation positions available
- This aligns the algorithm blending (SHAPE) with position eligibility (flavor)

### Predicted Impact

**Primary Effects** (syncopation by zone):
- stable zone: Expected to remain ~0.00-0.10 (SHAPE < 0.3 → flavor < 0.3 → no offbeats)
- syncopated zone: Expected 0.30-0.50 (SHAPE 0.3-0.7 → offbeats enabled)
- wild zone: Expected 0.50-0.80 (SHAPE 0.7-1.0 → full syncopation mask)
- Confidence: HIGH (90%) - direct cause-effect relationship

**Secondary Effects** (other metrics):
- regularity: Expected -5% to -15% decrease (more syncopation = less regular)
- voiceSeparation: Expected minimal change (0 to -5%)
- density: Expected no change (hit counts unchanged)
- Reasoning: Syncopation and regularity are inversely correlated

**Risk Assessment**:
- Regression risk: MEDIUM
- Potential regressions: regularity in wild zone (already too high at 0.69)
- Mitigation: This is actually a BENEFIT - wild zone regularity SHOULD decrease

### Success Criteria

- syncopation (wild) improves from 0.00 to >= 0.40
- syncopation (syncopated) decreases from 0.95 to 0.30-0.50 range
- syncopation (stable) remains <= 0.22
- All tests pass

### Learning Objectives

What will this iteration teach us about:
- How FLAVOR controls syncopation position eligibility
- Whether SHAPE→flavor mapping produces musically useful results
- Interaction between position eligibility and pattern metrics
