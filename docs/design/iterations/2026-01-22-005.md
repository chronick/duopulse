---
iteration_id: 2026-01-22-005
goal: "Improve syncopated zone syncopation to reach 0.70 target"
status: failed
started_at: 2026-01-22T18:25:00Z
completed_at: 2026-01-22T18:45:00Z
branch: feature/iterate-2026-01-22-005
commit: 6c9aa3e
pr: https://github.com/chronick/duopulse/pull/22 (closed)
estimate_accuracy: 0
---

# Iteration 2026-01-22-005: Improve Syncopated Zone Syncopation

## Goal

Push syncopated zone syncopation from 0.64 to 0.70 target by modifying rotation parameters.

## Baseline Metrics

From baseline v1.0.1 (post-iteration 004):
- syncopated zone syncopation: 0.64 (target: 0.70-1.00)
- Pentagon Score: 66.4%
- Conformance: 87.1% (8/8 pass)

## Approaches Tried

### Approach 1: Increase minRotation (FAILED - Regression)

**Change**: minRotation: 1 -> 2, maxRotation: 3 -> 4

**Hypothesis**: Larger guaranteed rotation = more displacement = higher syncopation.

**Result**:
- syncopation: 0.64 -> 0.17 (-73%)
- regularity: 0.62 -> 0.77 (+24%)
- Pentagon Score: 66.4% -> 59.0%

**Root Cause**: Uniform rotation (all patterns get 2+ step rotation) creates UNIFORM patterns, which are MORE regular and LESS syncopated. The previous 1-3 step range had variation that created diverse hit positions.

### Approach 2: Increase maxRotation Only (NO EFFECT)

**Change**: maxRotation: 3 -> 5 (keep minRotation=1)

**Hypothesis**: Wider rotation range = more potential for high-syncopation rotations.

**Result**: All metrics identical to baseline.

**Root Cause Investigation**: The eval uses a fixed seed (0xDEADBEEF). For this seed, `HashToFloat(seed, 3000) = 0.738`, which produces rotation=3 regardless of maxRotation (since 1 + int(0.738 * N) = 3 for N >= 3).

### Approach 3: Change hashKey (NO EFFECT)

**Change**: hashKey: 3000 -> 4500

**Hypothesis**: Different hashKey = different hash value = different rotation.

**Result**: All metrics identical to baseline.

**Root Cause**: For this seed, ALL tested hashKeys (1000-10000) produce hash values in the 0.67-1.0 range, which all map to rotation=3. The seed itself is "biased high" for this hash function.

### Approach 4: SHAPE-dependent hashKey (NO EFFECT)

**Change**: hashKey = 3000 + int(shape * 1000)

**Hypothesis**: Different SHAPE values produce different hashKeys, creating varied rotations across the zone.

**Result**: All metrics identical to baseline.

**Root Cause**: All SHAPE-derived hashKeys (3300-3650) still produce rotation=3 for this seed.

### Approach 5: Seed XOR with SHAPE (FAILED - Major Regression)

**Change**: rotationSeed = seed XOR int(shape * 1000000)

**Hypothesis**: XORing the seed creates fundamentally different rotation distributions.

**Result**:
- syncopated zone syncopation: 0.64 -> 0.34 (-47%)
- wild zone syncopation: 1.00 -> 0.62 (-38%)
- Pentagon Score: 66.4% -> 58.9%

**Root Cause**: XOR created rotation values that happen to place hits on STRONGER beats, reducing syncopation dramatically.

## Key Discoveries

### 1. Rotation is Seed-Deterministic

The rotation formula `rotation = minRotation + int(HashToFloat(seed, hashKey) * range)` is fully determined by the seed. For the eval seed (0xDEADBEEF), all tested configurations produce rotation=3 for the syncopated zone.

### 2. The Eval Seed is "Biased High"

The test seed produces hash values consistently in the 0.67-1.0 range across many hashKey values. This is a statistical artifact of this particular seed value.

### 3. Uniform Rotation is Anti-Syncopation

Forcing all patterns to have the same rotation (e.g., minRotation=2) creates uniform patterns, which increases regularity and DECREASES syncopation. Syncopation benefits from variation in rotation values.

### 4. The 0.64 Ceiling May Be Optimal for Current Design

The rotation mechanism introduced in iteration 004 jumped syncopation from 0.21 to 0.64. Further improvement via rotation parameters appears to be hitting diminishing returns. The remaining gap to 0.70 may require:
- Weight distribution changes in GenerateSyncopationPattern
- Multi-seed evaluation (to remove bias from single seed)
- Accepting 0.64 as "close enough" (91% of target)

## Individual Pattern Analysis

| SHAPE | Syncopation | Notes |
|-------|-------------|-------|
| 0.30 | 0.731 | IN target (0.70-1.00) |
| 0.50 | 0.526 | BELOW target - pulls down average |
| 0.70 | 1.000 | IN target (wild zone) |

The SHAPE=0.50 mid-zone value is the problematic one. It receives the same rotation=3 as SHAPE=0.30, but its weight distribution produces fewer weak-beat hits.

## Prediction Accuracy

| Aspect | Predicted | Actual | Accuracy |
|--------|-----------|--------|----------|
| minRotation increase helps | +9% syncopation | -73% syncopation | 0% |
| maxRotation increase helps | +6% syncopation | 0% change | 0% |
| hashKey change helps | Some improvement | 0% change | 0% |
| SHAPE-dependent rotation | Improvement | 0% or regression | 0% |

**Overall Estimate Accuracy**: 0% - All predictions were wrong.

## Lessons Learned

### What Surprised Us

1. **Uniform rotation hurts syncopation**: Counter-intuitively, guaranteeing larger rotation creates more uniform (regular) patterns, which reduces syncopation.

2. **Hash function stability**: For certain seeds, the hash function produces stable outputs across wide hashKey ranges. The eval seed is one of these.

3. **Seed bias**: A single test seed creates systematic biases that mask the effect of parameter changes.

### New Patterns Identified

**Seed-Dependent Rotation Ceiling**: When using a deterministic seed-based system, certain seeds will hit ceilings that can't be overcome by parameter changes alone.

**Prevention**: Use multi-seed evaluation, or design rotation to be SHAPE-dependent at the algorithm level (not just hash-key level).

### Implications for Future Iterations

1. **Don't try more rotation parameter changes**: The rotation mechanism is already at its ceiling for the eval seed.

2. **Consider weight distribution changes**: The bottleneck is in GenerateSyncopationPattern weights, not rotation.

3. **Consider multi-seed evaluation**: Single-seed eval creates statistical artifacts.

4. **Accept near-target**: 0.64 is 91% of the 0.70 target, which may be acceptable.

## Files Changed

None (all changes reverted after testing).

## Evaluation

- Target metric: 0% improvement FAIL
- Approaches tried: 5
- Best result: No improvement (baseline preserved)
- Worst result: -73% regression (reverted)

## Decision

**FAILED** - No approach improved syncopated zone syncopation. The rotation mechanism introduced in iteration 004 appears to be at its ceiling for the current eval seed. Code reverted to baseline.

## Recommended Next Steps

1. **Option A - Accept 0.64**: Consider 0.64 "close enough" to 0.70 (91% of target) and move on to other improvements.

2. **Option B - Multi-seed evaluation**: Modify eval to test multiple seeds and average results, removing single-seed bias.

3. **Option C - Weight distribution**: Investigate GenerateSyncopationPattern weight changes to boost SHAPE=0.50 specifically.

4. **Option D - Revise target**: If 0.64 represents the design's actual capability, consider revising the target range downward.

## Narration

This iteration attempted to push syncopated zone syncopation from 0.64 to the 0.70 target by modifying the rotation parameters introduced in iteration 004.

Five approaches were tried: increasing minimum rotation, increasing maximum rotation, changing the hash key, making the hash key SHAPE-dependent, and XORing the seed with a SHAPE-derived value.

All approaches either had no effect or caused significant regressions. Investigation revealed that the eval's fixed seed (0xDEADBEEF) produces hash values that consistently map to rotation=3 regardless of parameter changes. This is a "seed bias" - a statistical artifact of this particular seed value.

The most surprising discovery was that increasing minimum rotation (approach 1) DECREASED syncopation dramatically. This is because uniform rotation creates uniform patterns, which are more regular and less syncopated. Syncopation benefits from variation in hit positions, not consistent displacement.

The key insight is that the rotation mechanism is already at its ceiling for this eval seed. Further syncopation improvements would require changes to weight distributions or multi-seed evaluation to remove the single-seed bias.

The code was reverted to baseline. The 0.64 syncopation value (91% of target) may need to be accepted as the practical limit of the current design.
