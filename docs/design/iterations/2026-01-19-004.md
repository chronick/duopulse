---
iteration_id: 2026-01-19-004
goal: "Increase syncopation in syncopated zone"
status: failed
started_at: 2026-01-20T02:20:00Z
completed_at: 2026-01-20T02:45:00Z
branch: feature/iterate-2026-01-19-004
commit: null
pr: null
estimate_accuracy: 0
---

# Iteration 2026-01-19-004: Increase syncopation in syncopated zone

## Goal

Increase syncopation in syncopated zone toward middle of target range (0.22-0.48).
Auto-detected goal based on syncopated zone syncopation being at low end of target.

## Critical Discovery: Evaluation Bug

**This iteration was blocked by a pre-existing evaluation bug:**

The 64-step pattern upgrade (commit 83f94c3) increased pattern length from 32 to 64
but didn't update METRIC_WEIGHTS_32 to METRIC_WEIGHTS_64 in evaluate-expressiveness.js.

This caused syncopation to compute as 0 for all patterns because:
- `weights[32]..weights[63]` were undefined
- Undefined comparisons always failed, producing no tension values

**Fix committed as part of this iteration branch.**

## Baseline Metrics (after eval fix)

| Zone | Syncopation | Target | Status |
|------|-------------|--------|--------|
| stable | 1.00 | 0.00-0.22 | OVER |
| syncopated | 0.95 | 0.22-0.48 | OVER |
| wild | 0.77 | 0.42-0.75 | OVER |

Overall alignment: 44.5%

## Lever Analysis

Based on sensitivity matrix:
- **shapeCrossfade1End**: syncopation sensitivity = -0.038, R² = 0.875
- Strongest signal in entire matrix

Proposed change:
- `kShapeCrossfade1End`: 0.32f → 0.30f (-6.25%)

## Estimates (from estimate-2026-01-19-004.md)

### Predicted Impact

- Syncopation: Expected +1.0% to +2.5% improvement
- Confidence: HIGH (85%) based on R²=0.875
- Secondary effects: negligible (<0.2% regression predicted)

## Result Metrics

| Metric | Before | After | Delta |
|--------|--------|-------|-------|
| syncopation (syncopated) | 0.9477 | 0.9477 | 0.0% |
| overall alignment | 44.5% | 44.5% | 0.0% |

**No change detected.**

## Prediction Accuracy Analysis

| Aspect | Predicted | Actual | Accuracy |
|--------|-----------|--------|----------|
| Syncopation change | +1.0-2.5% | 0% | 0% |
| Secondary effects | <0.2% | 0% | N/A |

**Overall Estimate Accuracy**: 0%

## Why This Failed

The lever change had zero effect because:

1. **Test coverage gap**: The evaluation sweep tests SHAPE values at discrete points:
   0, 0.15, 0.30, 0.50, 0.70, 0.85. None sample the 0.30-0.32 range.

2. **Boundary vs interior**: At SHAPE=0.30, patterns were previously in the crossfade
   zone (blending stable→syncopation). After the change, SHAPE=0.30 is at the exact
   boundary, which produces the same output.

3. **Narrow effective range**: The change only affects SHAPE values in [0.30, 0.32),
   a 0.02-wide band that no test points sample.

## Lessons Learned

### What We Got Wrong

1. **Sensitivity data doesn't guarantee impact**: High R² (0.875) for
   shapeCrossfade1End→syncopation meant the relationship is reliable when tested,
   but doesn't mean our specific change will affect measured patterns.

2. **Test coverage matters**: The sensitivity sweep tested parameter variations,
   but the eval sweep tests fixed SHAPE values. A lever change that only affects
   narrow SHAPE ranges won't show up in eval metrics.

3. **Boundary effects are tricky**: Moving a zone boundary from 0.32 to 0.30
   doesn't change behavior AT 0.30 - it changes behavior BETWEEN 0.30 and 0.32.

### New Hypotheses

1. Zone boundary changes require finer-grained test sweeps to detect impact
2. Effective iteration requires understanding which SHAPE values are actually tested
3. Consider changing the eval sweep points to include boundary regions

### Implications for Future Iterations

- **Check test coverage**: Before iterating, verify the eval sweep samples the
  affected SHAPE/ENERGY ranges
- **Consider larger changes**: A 2% boundary shift (0.32→0.30) was too small
  to affect any test points. Larger shifts might cross test point boundaries.
- **Alternative approach**: Instead of zone boundaries, target levers that affect
  ALL patterns (like k values or runtime params)

## Narration

This iteration attempted to improve syncopation by shrinking the stable→syncopation
crossfade zone (moving the boundary from 0.32 to 0.30). The sensitivity matrix
showed strong correlation (R²=0.875) between this lever and syncopation.

However, the iteration was first blocked by a pre-existing bug where syncopation
always computed as 0 (METRIC_WEIGHTS array was too short for 64-step patterns).
After fixing this bug and updating the baseline, we discovered that the lever
change had zero effect on measured metrics.

The reason: our eval sweep tests patterns at specific SHAPE values (0, 0.15, 0.30,
0.50, 0.70, 0.85), none of which fall in the narrow 0.30-0.32 range affected by
our change. The sensitivity data was correct (shapeCrossfade1End does affect
syncopation), but our specific change missed all test points.

**Key insight**: Sensitivity analysis tells you what levers affect what metrics,
but not whether your specific change will affect the patterns actually tested.
Future iterations should verify test coverage before committing to a lever change.
